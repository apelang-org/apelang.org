<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ape: a programming language</title>
  <style>
    body {
      margin: 0 auto;
      padding: 0 50px;
      max-width: 1280px;
      font-family: monospace;
      font-size: 18px;
    }

    a {
      color: black;
    }

    .links a {
      font-size: 24px;
      text-decoration: none;
    }

    .code {
      display: inline-block;
      padding: 3px 5px;
      background-color: #333333;
      border: 2px solid gray;
      border-radius: 7px;
      white-space: pre;
      color: whitesmoke;
    }
  </style>
</head>
<body>
  <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
    <div style="padding: 20px; width: 100%; max-width: 400px;">
      <svg viewBox="0 0 110 50" xmlns="http://www.w3.org/2000/svg">
        <!-- A -->
        <rect x="10" y="0" width="10" height="10" fill="#000000"></rect>
        <rect x="0" y="10" width="10" height="40" fill="#000000"></rect>
        <rect x="20" y="10" width="10" height="40" fill="#000000"></rect>
        <rect x="0" y="20" width="30" height="10" fill="#000000"></rect>
        <!-- P -->
        <rect x="40" y="0" width="10" height="50" fill="#000000"></rect>
        <rect x="40" y="0" width="20" height="10" fill="#000000"></rect>
        <rect x="60" y="10" width="10" height="10" fill="#000000"></rect>
        <rect x="40" y="20" width="20" height="10" fill="#000000"></rect>
        <!-- E -->
        <rect x="80" y="10" width="10" height="30" fill="#000000"></rect>
        <rect x="90" y="0" width="20" height="10" fill="#000000"></rect>
        <rect x="80" y="20" width="20" height="10" fill="#000000"></rect>
        <rect x="90" y="40" width="20" height="10" fill="#000000"></rect>
      </svg>
    </div>
    <div class="links">
      <a href="https://github.com/apelang-org/ape">GitHub</a>
    </div>
  </div>
  <hr>
  <div style="display: flex; justify-content: space-evenly; align-items: start; flex-wrap: wrap;">
<div style="margin: 0 20px;">
<h2 style="text-align: center;">Familiar</h2>
<div class="code">#!/usr/bin/env ape

from basic import print

print("Hello, world!", 5)</div>
</div>
<div style="margin: 0 20px;">
<h2 style="text-align: center;">Friendly</h2>
<div class="code">#!/usr/bin/env ape

from basic import format, print

# UFCS
print("Hello, %!".format("friend"))</div>
</div>
<div style="margin: 0 20px;">
<h2 style="text-align: center;">Statically Typed</h2>
<div class="code">#!/usr/bin/env ape

# implicit procedure call with default argument
assert type == type[.type]

# enum literals
int = type[.int]

def abs[T](x: T) -> T:
  return -x if x < 0 else x

abs(-5 as int)</div>
</div>
<div style="margin: 0 20px;">
<h2 style="text-align: center;">Explicit Memory Management</h2>
<div class="code">#!/usr/bin/env ape

from basic import *
from my_allocators import SomeImaginaryAllocator

with allocator = SomeImaginaryAllocator():
  count = 1
  print("I will be doing % allocation%.".format(count, "s" if count != 1))</div>
</div>
  </div>
  <hr>
  <div>
    <h2>Features</h2>
    <ul>
      <li>Statically typed</li>
      <li>Zero is initialization</li>
      <li>No garbage collector</li>
      <li>No methods</li>
      <li>Multiple-uniform call syntax</li>
      <li>Procedure overloading</li>
      <li>Operator overloading</li>
      <li>Polymorphic parameters</li>
      <li>Compile-time variables</li>
      <li>Compile-time evaluation</li>
      <li>Global scope evaluation</li>
      <li>Lexical scoping</li>
      <li>Shadowing</li>
      <li>Explicit reassignment</li>
      <li>Zeroed default else in ternary if/else</li>
      <li>Null coalescing</li>
      <li>Error values and propagating results (try)</li>
      <li>Macros</li>
      <li>Scopeless control flow (raise if/raise for)</li>
      <li>Compiler is a userspace library</li>
    </ul>
    <h2>Gratitudes</h2>
    <p>Thanks to Casey Muratori for making Handmade Hero and showing me that programming didn't have to be depressing.</p>
    <p>Thanks to Jonathan Blow for his compiler streams which always excite me to make my own designs better.
      This project wouldn't exist without Jon's advice to do things even if they invite criticism from others.
      Check out his language "jai" (unofficial name) as an alternative to ape that you might prefer in many cases.</p>
    <p>Thanks to Bill Hall (Odin), Andrew Kelley (Zig), and Walter Bright (D) for making projects that forward compiler research and encourage
      others to create their own things and truly learn how they work.</p>
    <p>Thanks to George Hotz for making Python's syntax seem cool rather than stupid as I originally presumed.
      Also thanks to tinygrad for teaching me about machine learning and the inspiration for this website's design.</p>
  </div>
  <script>
    const isspace = c => c === ' ' || c === '\t' || c === '\n' || c === '\r';
    const isdigit = c => '0' <= c && c <= '9';
    const isalpha = c => 'A' <= c && c <= 'Z' || 'a' <= c && c <= 'z';
    const isalnum = c => isalpha(c) || isdigit(c);
    const kwlist = ['False', 'None', 'True', 'and', 'as', 'assert', 'async', 'await', 'break', 'case', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except', 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is', 'lambda', 'match', 'nonlocal', 'not', 'or', 'pass', 'raise', 'return', 'try', 'while', 'with', 'yield'];
    function colorize(s) {
      let result = "";
      let p = 0;
      while (p < s.length) {
        while (true) {
          while (p < s.length && isspace(s[p])) result += s[p++];
          const start = p;
          if (p < s.length && s[p] === '#') {
            while (p < s.length && s[p] !== '\n') p += 1;
            result += `<span style="color: ${start + 1 >= s.length || s[start + 1] !== '!' ? "gray" : "#00BB77"};">${s.slice(start, p)}</span>`;
            continue;
          }
          break;
        }
        if (p >= s.length) break;
        const start = p;
        if (isalpha(s[p]) || s[p] === '_') {
          while (p < s.length && (isalnum(s[p]) || s[p] === '_')) p += 1;
          result += `<span style="color: ${kwlist.includes(s.slice(start, p)) ? "lightcyan" : "lightblue"};">${s.slice(start, p)}</span>`;
        } else if (s[p] === '"') {
          p += 1;
          while (p < s.length && (s[p - 1] === '\\' || s[p] !== '"')) p += 1;
          p += 1;
          result += `<span style="color: #00BB77;">${s.slice(start, p)}</span>`;
        } else if (isdigit(s[p])) {
          while (p < s.length && isdigit(s[p])) p += 1;
          result += `<span style="color: orange;">${s.slice(start, p)}</span>`;
        } else {
          result += `<span style="color: lightgray;">${s[p++]}</span>`;
        }
      }
      return result;
    }

    const codes = document.querySelectorAll(".code");
    for (const code of codes) {
      code.innerHTML = colorize(code.textContent);
    }
  </script>
</body>
</html>
